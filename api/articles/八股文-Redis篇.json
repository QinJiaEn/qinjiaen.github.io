{"title":"八股文-Redis篇","slug":"八股文-Redis篇","date":"2023-07-27T10:08:42.000Z","updated":"2025-11-16T16:53:55.508Z","comments":true,"path":"api/articles/八股文-Redis篇.json","excerpt":null,"covers":["/posts/5d16a534/image-20230721115118730.png","/posts/5d16a534/image-20230721120007468.png","/posts/5d16a534/image-20230721115131432.png","/posts/5d16a534/image-20230721114538562.png","/posts/5d16a534/image-20230721114924136.png","/posts/5d16a534/image-20230721115220031.png","/posts/5d16a534/image-20230721114214034.png","/posts/5d16a534/image-20230721115635567.png","/posts/5d16a534/image-20230721115506034.png","/posts/5d16a534/image-20230721120215526.png","/posts/5d16a534/image-20230721120455765.png","/posts/5d16a534/image-20230721120928537.png","/posts/5d16a534/image-20230721121028252.png","/posts/5d16a534/image-20230721121132314.png","/posts/5d16a534/image-20230721121729727.png","/posts/5d16a534/image-20230721122141511.png","/posts/5d16a534/image-20230721122301976.png","/posts/5d16a534/image-20230721122334453.png","/posts/5d16a534/image-20230721122613562.png","/posts/5d16a534/image-20230721152708702.png","/posts/5d16a534/image-20230721153130474.png","/posts/5d16a534/image-20230721153307831.png","/posts/5d16a534/image-20230721153342444.png","/posts/5d16a534/image-20230721153628006.png","/posts/5d16a534/image-20230721153850193.png","/posts/5d16a534/image-20230721154024992.png","/posts/5d16a534/image-20230721154901642.png","/posts/5d16a534/image-20230721155134720.png","/posts/5d16a534/image-20230721155429708.png","/posts/5d16a534/image-20230721155812984.png","/posts/5d16a534/image-20230721160432401.png","/posts/5d16a534/image-20230721160448534.png","/posts/5d16a534/image-20230721175254947.png","/posts/5d16a534/image-20230721175554263.png","/posts/5d16a534/image-20230721175832796.png","/posts/5d16a534/image-20230721180023425.png","/posts/5d16a534/image-20230721182042182.png","/posts/5d16a534/image-20230721182249354.png","/posts/5d16a534/image-20230721211412045.png","/posts/5d16a534/image-20230721211929068.png","/posts/5d16a534/image-20230721212233383.png","/posts/5d16a534/image-20230722103032370.png","/posts/5d16a534/image-20230722103507730.png","/posts/5d16a534/image-20230722104106658.png","/posts/5d16a534/image-20230722104456988.png","/posts/5d16a534/image-20230722104858964.png","/posts/5d16a534/image-20230722105348983.png","/posts/5d16a534/image-20230722105633698.png","/posts/5d16a534/image-20230722110334906.png","/posts/5d16a534/image-20230722111138343.png","/posts/5d16a534/image-20230722111618596.png","/posts/5d16a534/image-20230722112415285.png","/posts/5d16a534/image-20230722112450017-1690452640159-54.png"],"content":"<h1 id=\"Redis-篇\"><a href=\"#Redis-篇\" class=\"headerlink\" title=\"Redis 篇\"></a>Redis 篇</h1><p><img src=\"/posts/5d16a534/image-20230721115118730.png\" alt=\"image-20230721115118730\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721120007468.png\" alt=\"image-20230721120007468\"></p>\n<h2 id=\"缓存问题\"><a href=\"#缓存问题\" class=\"headerlink\" title=\"缓存问题\"></a>缓存问题</h2><h3 id=\"缓存穿透\"><a href=\"#缓存穿透\" class=\"headerlink\" title=\"缓存穿透\"></a>缓存穿透</h3><p><img src=\"/posts/5d16a534/image-20230721115131432.png\" alt=\"image-20230721115131432\"></p>\n<h4 id=\"方案一：缓存空数据\"><a href=\"#方案一：缓存空数据\" class=\"headerlink\" title=\"方案一：缓存空数据\"></a>方案一：缓存空数据</h4><p><img src=\"/posts/5d16a534/image-20230721114538562.png\" alt=\"image-20230721114538562\"></p>\n<h4 id=\"方案二：布隆过滤器\"><a href=\"#方案二：布隆过滤器\" class=\"headerlink\" title=\"方案二：布隆过滤器\"></a>方案二：布隆过滤器</h4><p><img src=\"/posts/5d16a534/image-20230721114924136.png\" alt=\"image-20230721114924136\"></p>\n<h4 id=\"什么是布隆过滤器\"><a href=\"#什么是布隆过滤器\" class=\"headerlink\" title=\"什么是布隆过滤器\"></a>什么是布隆过滤器</h4><p><img src=\"/posts/5d16a534/image-20230721115220031.png\" alt=\"image-20230721115220031\"></p>\n<h3 id=\"缓存击穿\"><a href=\"#缓存击穿\" class=\"headerlink\" title=\"缓存击穿\"></a>缓存击穿</h3><p><strong><img src=\"/posts/5d16a534/image-20230721114214034.png\" alt=\"image-20230721114214034\"></strong><img src=\"/posts/5d16a534/image-20230721114447532.png\" alt=\"image-20230721114447532\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">其中互斥锁：强一致、性能差</span><br><span class=\"line\">逻辑过期：  高可用、性能优</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n<h3 id=\"缓存雪崩\"><a href=\"#缓存雪崩\" class=\"headerlink\" title=\"缓存雪崩\"></a>缓存雪崩</h3><p><img src=\"/posts/5d16a534/image-20230721115635567.png\" alt=\"image-20230721115635567\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721115506034.png\" alt=\"image-20230721115506034\"></p>\n<h2 id=\"双写一致\"><a href=\"#双写一致\" class=\"headerlink\" title=\"双写一致\"></a>双写一致</h2><p><img src=\"/posts/5d16a534/image-20230721120215526.png\" alt=\"image-20230721120215526\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721120455765.png\" alt=\"image-20230721120455765\"></p>\n<h3 id=\"问题？是先删除缓存还是先修改数据库？\"><a href=\"#问题？是先删除缓存还是先修改数据库？\" class=\"headerlink\" title=\"问题？是先删除缓存还是先修改数据库？\"></a>问题？是先删除缓存还是先修改数据库？</h3><h4 id=\"先删除缓存，在操作数据库有两种情况\"><a href=\"#先删除缓存，在操作数据库有两种情况\" class=\"headerlink\" title=\"先删除缓存，在操作数据库有两种情况\"></a>先删除缓存，在操作数据库有两种情况</h4><p><img src=\"/posts/5d16a534/image-20230721120928537.png\" alt=\"image-20230721120928537\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721121028252.png\" alt=\"image-20230721121028252\"></p>\n<h4 id=\"先修改数据库，在删除缓存\"><a href=\"#先修改数据库，在删除缓存\" class=\"headerlink\" title=\"先修改数据库，在删除缓存\"></a>先修改数据库，在删除缓存</h4><p><img src=\"/posts/5d16a534/image-20230721121132314.png\" alt=\"image-20230721121132314\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721121729727.png\" alt=\"image-20230721121729727\"></p>\n<h3 id=\"如果要保持强一致，加锁\"><a href=\"#如果要保持强一致，加锁\" class=\"headerlink\" title=\"如果要保持强一致，加锁\"></a>如果要保持强一致，加锁</h3><p><img src=\"/posts/5d16a534/image-20230721122141511.png\" alt=\"image-20230721122141511\"></p>\n<h3 id=\"允许延迟\"><a href=\"#允许延迟\" class=\"headerlink\" title=\"允许延迟\"></a>允许延迟</h3><h4 id=\"基于MQ\"><a href=\"#基于MQ\" class=\"headerlink\" title=\"基于MQ\"></a>基于MQ</h4><p><img src=\"/posts/5d16a534/image-20230721122301976.png\" alt=\"image-20230721122301976\"></p>\n<h4 id=\"基于-Canal\"><a href=\"#基于-Canal\" class=\"headerlink\" title=\"基于 Canal\"></a>基于 Canal</h4><p><img src=\"/posts/5d16a534/image-20230721122334453.png\" alt=\"image-20230721122334453\"></p>\n<h4 id=\"e-g\"><a href=\"#e-g\" class=\"headerlink\" title=\"e.g\"></a>e.g</h4><p><img src=\"/posts/5d16a534/image-20230721122613562.png\" alt=\"image-20230721122613562\"></p>\n<h2 id=\"Redis-持久化\"><a href=\"#Redis-持久化\" class=\"headerlink\" title=\"Redis 持久化\"></a>Redis 持久化</h2><h3 id=\"RDB\"><a href=\"#RDB\" class=\"headerlink\" title=\"RDB\"></a>RDB</h3><p><img src=\"/posts/5d16a534/image-20230721152708702.png\" alt=\"image-20230721152708702\"></p>\n<h4 id=\"RDB的执行原理\"><a href=\"#RDB的执行原理\" class=\"headerlink\" title=\"RDB的执行原理\"></a>RDB的执行原理</h4><p><img src=\"/posts/5d16a534/image-20230721153130474.png\" alt=\"image-20230721153130474\"></p>\n<h3 id=\"AOF\"><a href=\"#AOF\" class=\"headerlink\" title=\"AOF\"></a>AOF</h3><p><img src=\"/posts/5d16a534/image-20230721153307831.png\" alt=\"image-20230721153307831\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721153342444.png\" alt=\"image-20230721153342444\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721153628006.png\" alt=\"image-20230721153628006\"></p>\n<h4 id=\"RDB和AOF的对比\"><a href=\"#RDB和AOF的对比\" class=\"headerlink\" title=\"RDB和AOF的对比\"></a>RDB和AOF的对比</h4><p><img src=\"/posts/5d16a534/image-20230721153850193.png\" alt=\"image-20230721153850193\"></p>\n<h2 id=\"Redis-的数据过期策略\"><a href=\"#Redis-的数据过期策略\" class=\"headerlink\" title=\"Redis 的数据过期策略\"></a>Redis 的数据过期策略</h2><p><img src=\"/posts/5d16a534/image-20230721154024992.png\" alt=\"image-20230721154024992\"></p>\n<h3 id=\"惰性删除\"><a href=\"#惰性删除\" class=\"headerlink\" title=\"惰性删除\"></a>惰性删除</h3><p><img src=\"/posts/5d16a534/image-20230721154901642.png\" alt=\"image-20230721154901642\"></p>\n<h3 id=\"定期删除\"><a href=\"#定期删除\" class=\"headerlink\" title=\"定期删除\"></a>定期删除</h3><p><img src=\"/posts/5d16a534/image-20230721155134720.png\" alt=\"image-20230721155134720\"></p>\n<h3 id=\"e-g-1\"><a href=\"#e-g-1\" class=\"headerlink\" title=\"e.g\"></a>e.g</h3><p><img src=\"/posts/5d16a534/image-20230721155429708.png\" alt=\"image-20230721155429708\"></p>\n<h2 id=\"Redis-的数据淘汰策略\"><a href=\"#Redis-的数据淘汰策略\" class=\"headerlink\" title=\"Redis 的数据淘汰策略\"></a>Redis 的数据淘汰策略</h2><p><img src=\"/posts/5d16a534/image-20230721155812984.png\" alt=\"image-20230721155812984\"></p>\n<h4 id=\"e-g-2\"><a href=\"#e-g-2\" class=\"headerlink\" title=\"e.g\"></a>e.g</h4><p><img src=\"/posts/5d16a534/image-20230721160432401.png\" alt=\"image-20230721160432401\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721160448534.png\" alt=\"image-20230721160448534\"></p>\n<h2 id=\"Redis-的分布式锁\"><a href=\"#Redis-的分布式锁\" class=\"headerlink\" title=\"Redis 的分布式锁\"></a>Redis 的分布式锁</h2><p><img src=\"/posts/5d16a534/image-20230721175254947.png\" alt=\"image-20230721175254947\"></p>\n<h4 id=\"e-g-3\"><a href=\"#e-g-3\" class=\"headerlink\" title=\"e.g\"></a>e.g</h4><p><img src=\"/posts/5d16a534/image-20230721175554263.png\" alt=\"image-20230721175554263\"></p>\n<h2 id=\"Redis-集群\"><a href=\"#Redis-集群\" class=\"headerlink\" title=\"Redis 集群\"></a>Redis 集群</h2><p><img src=\"/posts/5d16a534/image-20230721175832796.png\" alt=\"image-20230721175832796\"></p>\n<h3 id=\"主从复制\"><a href=\"#主从复制\" class=\"headerlink\" title=\"主从复制\"></a>主从复制</h3><p><img src=\"/posts/5d16a534/image-20230721180023425.png\" alt=\"image-20230721180023425\"></p>\n<h5 id=\"全量同步\"><a href=\"#全量同步\" class=\"headerlink\" title=\"全量同步\"></a>全量同步</h5><p><img src=\"/posts/5d16a534/image-20230721182042182.png\" alt=\"image-20230721182042182\">  </p>\n<h5 id=\"增量同步\"><a href=\"#增量同步\" class=\"headerlink\" title=\"增量同步\"></a>增量同步</h5><p><img src=\"/posts/5d16a534/image-20230721182249354.png\" alt=\"image-20230721182249354\"></p>\n<h3 id=\"哨兵模式\"><a href=\"#哨兵模式\" class=\"headerlink\" title=\"哨兵模式\"></a>哨兵模式</h3><p><img src=\"/posts/5d16a534/image-20230721211412045.png\" alt=\"image-20230721211412045\"></p>\n<h5 id=\"服务状态监控\"><a href=\"#服务状态监控\" class=\"headerlink\" title=\"服务状态监控\"></a>服务状态监控</h5><p><img src=\"/posts/5d16a534/image-20230721211929068.png\" alt=\"image-20230721211929068\"></p>\n<h5 id=\"哨兵模式（脑裂）\"><a href=\"#哨兵模式（脑裂）\" class=\"headerlink\" title=\"哨兵模式（脑裂）\"></a>哨兵模式（脑裂）</h5><p><img src=\"/posts/5d16a534/image-20230721212233383.png\" alt=\"image-20230721212233383\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">master因为网络或者其他原因暂时不能和Sentinel通信，导致从节点中产生了新的master，等网络恢复之后，会产生两个master，那么之前的master会降级为slave，（那么这个过程中客户端到老master中存入的数据就会永久丢失）</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h5 id=\"e-g-4\"><a href=\"#e-g-4\" class=\"headerlink\" title=\"e.g\"></a>e.g</h5><p><img src=\"/posts/5d16a534/image-20230722103032370.png\" alt=\"image-20230722102959972\"></p>\n<h3 id=\"分片集群\"><a href=\"#分片集群\" class=\"headerlink\" title=\"分片集群\"></a>分片集群</h3><p><img src=\"/posts/5d16a534/image-20230722103507730.png\" alt=\"image-20230722103507730\"></p>\n<h5 id=\"分片集群结构-数据读写（哈希槽）\"><a href=\"#分片集群结构-数据读写（哈希槽）\" class=\"headerlink\" title=\"分片集群结构-数据读写（哈希槽）\"></a>分片集群结构-数据读写（哈希槽）</h5><p><img src=\"/posts/5d16a534/image-20230722104106658.png\" alt=\"image-20230722104106658\"></p>\n<h5 id=\"e-g-5\"><a href=\"#e-g-5\" class=\"headerlink\" title=\"e.g\"></a>e.g</h5><p><img src=\"/posts/5d16a534/image-20230722104456988.png\" alt=\"image-20230722104456988\"></p>\n<h2 id=\"Redis-单线程\"><a href=\"#Redis-单线程\" class=\"headerlink\" title=\"Redis 单线程\"></a>Redis 单线程</h2><p><img src=\"/posts/5d16a534/image-20230722104858964.png\" alt=\"image-20230722104858964\"></p>\n<h3 id=\"用户空间和内核空间\"><a href=\"#用户空间和内核空间\" class=\"headerlink\" title=\"用户空间和内核空间\"></a>用户空间和内核空间</h3><p><img src=\"/posts/5d16a534/image-20230722105348983.png\" alt=\"image-20230722105348983\"></p>\n<h3 id=\"阻塞-I-x2F-O\"><a href=\"#阻塞-I-x2F-O\" class=\"headerlink\" title=\"阻塞 I&#x2F;O\"></a>阻塞 I&#x2F;O</h3><p><img src=\"/posts/5d16a534/image-20230722105633698.png\" alt=\"image-20230722105633698\"></p>\n<h3 id=\"非阻塞-I-x2F-O\"><a href=\"#非阻塞-I-x2F-O\" class=\"headerlink\" title=\"非阻塞 I&#x2F;O\"></a>非阻塞 I&#x2F;O</h3><p><img src=\"/posts/5d16a534/image-20230722110334906.png\" alt=\"image-20230722110334906\"></p>\n<h3 id=\"I-x2F-O-多路复用\"><a href=\"#I-x2F-O-多路复用\" class=\"headerlink\" title=\"I&#x2F;O 多路复用\"></a>I&#x2F;O 多路复用</h3><p><img src=\"/posts/5d16a534/image-20230722111138343.png\" alt=\"image-20230722111138343\"></p>\n<p><img src=\"/posts/5d16a534/image-20230722111618596.png\" alt=\"image-20230722111618596\"></p>\n<h3 id=\"Redis-的网络模型\"><a href=\"#Redis-的网络模型\" class=\"headerlink\" title=\"Redis 的网络模型\"></a>Redis 的网络模型</h3><p><img src=\"/posts/5d16a534/image-20230722112415285.png\" alt=\"image-20230722112415285\"></p>\n<h3 id=\"e-g-6\"><a href=\"#e-g-6\" class=\"headerlink\" title=\"e.g\"></a>e.g</h3><p><img src=\"/posts/5d16a534/image-20230722112450017-1690452640159-54.png\" alt=\"image-20230722112450017\"></p>\n","more":"<h1 id=\"Redis-篇\"><a href=\"#Redis-篇\" class=\"headerlink\" title=\"Redis 篇\"></a>Redis 篇</h1><p><img src=\"/posts/5d16a534/image-20230721115118730.png\" alt=\"image-20230721115118730\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721120007468.png\" alt=\"image-20230721120007468\"></p>\n<h2 id=\"缓存问题\"><a href=\"#缓存问题\" class=\"headerlink\" title=\"缓存问题\"></a>缓存问题</h2><h3 id=\"缓存穿透\"><a href=\"#缓存穿透\" class=\"headerlink\" title=\"缓存穿透\"></a>缓存穿透</h3><p><img src=\"/posts/5d16a534/image-20230721115131432.png\" alt=\"image-20230721115131432\"></p>\n<h4 id=\"方案一：缓存空数据\"><a href=\"#方案一：缓存空数据\" class=\"headerlink\" title=\"方案一：缓存空数据\"></a>方案一：缓存空数据</h4><p><img src=\"/posts/5d16a534/image-20230721114538562.png\" alt=\"image-20230721114538562\"></p>\n<h4 id=\"方案二：布隆过滤器\"><a href=\"#方案二：布隆过滤器\" class=\"headerlink\" title=\"方案二：布隆过滤器\"></a>方案二：布隆过滤器</h4><p><img src=\"/posts/5d16a534/image-20230721114924136.png\" alt=\"image-20230721114924136\"></p>\n<h4 id=\"什么是布隆过滤器\"><a href=\"#什么是布隆过滤器\" class=\"headerlink\" title=\"什么是布隆过滤器\"></a>什么是布隆过滤器</h4><p><img src=\"/posts/5d16a534/image-20230721115220031.png\" alt=\"image-20230721115220031\"></p>\n<h3 id=\"缓存击穿\"><a href=\"#缓存击穿\" class=\"headerlink\" title=\"缓存击穿\"></a>缓存击穿</h3><p><strong><img src=\"/posts/5d16a534/image-20230721114214034.png\" alt=\"image-20230721114214034\"></strong><img src=\"/posts/5d16a534/image-20230721114447532.png\" alt=\"image-20230721114447532\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">其中互斥锁：强一致、性能差</span><br><span class=\"line\">逻辑过期：  高可用、性能优</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n\n<h3 id=\"缓存雪崩\"><a href=\"#缓存雪崩\" class=\"headerlink\" title=\"缓存雪崩\"></a>缓存雪崩</h3><p><img src=\"/posts/5d16a534/image-20230721115635567.png\" alt=\"image-20230721115635567\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721115506034.png\" alt=\"image-20230721115506034\"></p>\n<h2 id=\"双写一致\"><a href=\"#双写一致\" class=\"headerlink\" title=\"双写一致\"></a>双写一致</h2><p><img src=\"/posts/5d16a534/image-20230721120215526.png\" alt=\"image-20230721120215526\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721120455765.png\" alt=\"image-20230721120455765\"></p>\n<h3 id=\"问题？是先删除缓存还是先修改数据库？\"><a href=\"#问题？是先删除缓存还是先修改数据库？\" class=\"headerlink\" title=\"问题？是先删除缓存还是先修改数据库？\"></a>问题？是先删除缓存还是先修改数据库？</h3><h4 id=\"先删除缓存，在操作数据库有两种情况\"><a href=\"#先删除缓存，在操作数据库有两种情况\" class=\"headerlink\" title=\"先删除缓存，在操作数据库有两种情况\"></a>先删除缓存，在操作数据库有两种情况</h4><p><img src=\"/posts/5d16a534/image-20230721120928537.png\" alt=\"image-20230721120928537\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721121028252.png\" alt=\"image-20230721121028252\"></p>\n<h4 id=\"先修改数据库，在删除缓存\"><a href=\"#先修改数据库，在删除缓存\" class=\"headerlink\" title=\"先修改数据库，在删除缓存\"></a>先修改数据库，在删除缓存</h4><p><img src=\"/posts/5d16a534/image-20230721121132314.png\" alt=\"image-20230721121132314\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721121729727.png\" alt=\"image-20230721121729727\"></p>\n<h3 id=\"如果要保持强一致，加锁\"><a href=\"#如果要保持强一致，加锁\" class=\"headerlink\" title=\"如果要保持强一致，加锁\"></a>如果要保持强一致，加锁</h3><p><img src=\"/posts/5d16a534/image-20230721122141511.png\" alt=\"image-20230721122141511\"></p>\n<h3 id=\"允许延迟\"><a href=\"#允许延迟\" class=\"headerlink\" title=\"允许延迟\"></a>允许延迟</h3><h4 id=\"基于MQ\"><a href=\"#基于MQ\" class=\"headerlink\" title=\"基于MQ\"></a>基于MQ</h4><p><img src=\"/posts/5d16a534/image-20230721122301976.png\" alt=\"image-20230721122301976\"></p>\n<h4 id=\"基于-Canal\"><a href=\"#基于-Canal\" class=\"headerlink\" title=\"基于 Canal\"></a>基于 Canal</h4><p><img src=\"/posts/5d16a534/image-20230721122334453.png\" alt=\"image-20230721122334453\"></p>\n<h4 id=\"e-g\"><a href=\"#e-g\" class=\"headerlink\" title=\"e.g\"></a>e.g</h4><p><img src=\"/posts/5d16a534/image-20230721122613562.png\" alt=\"image-20230721122613562\"></p>\n<h2 id=\"Redis-持久化\"><a href=\"#Redis-持久化\" class=\"headerlink\" title=\"Redis 持久化\"></a>Redis 持久化</h2><h3 id=\"RDB\"><a href=\"#RDB\" class=\"headerlink\" title=\"RDB\"></a>RDB</h3><p><img src=\"/posts/5d16a534/image-20230721152708702.png\" alt=\"image-20230721152708702\"></p>\n<h4 id=\"RDB的执行原理\"><a href=\"#RDB的执行原理\" class=\"headerlink\" title=\"RDB的执行原理\"></a>RDB的执行原理</h4><p><img src=\"/posts/5d16a534/image-20230721153130474.png\" alt=\"image-20230721153130474\"></p>\n<h3 id=\"AOF\"><a href=\"#AOF\" class=\"headerlink\" title=\"AOF\"></a>AOF</h3><p><img src=\"/posts/5d16a534/image-20230721153307831.png\" alt=\"image-20230721153307831\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721153342444.png\" alt=\"image-20230721153342444\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721153628006.png\" alt=\"image-20230721153628006\"></p>\n<h4 id=\"RDB和AOF的对比\"><a href=\"#RDB和AOF的对比\" class=\"headerlink\" title=\"RDB和AOF的对比\"></a>RDB和AOF的对比</h4><p><img src=\"/posts/5d16a534/image-20230721153850193.png\" alt=\"image-20230721153850193\"></p>\n<h2 id=\"Redis-的数据过期策略\"><a href=\"#Redis-的数据过期策略\" class=\"headerlink\" title=\"Redis 的数据过期策略\"></a>Redis 的数据过期策略</h2><p><img src=\"/posts/5d16a534/image-20230721154024992.png\" alt=\"image-20230721154024992\"></p>\n<h3 id=\"惰性删除\"><a href=\"#惰性删除\" class=\"headerlink\" title=\"惰性删除\"></a>惰性删除</h3><p><img src=\"/posts/5d16a534/image-20230721154901642.png\" alt=\"image-20230721154901642\"></p>\n<h3 id=\"定期删除\"><a href=\"#定期删除\" class=\"headerlink\" title=\"定期删除\"></a>定期删除</h3><p><img src=\"/posts/5d16a534/image-20230721155134720.png\" alt=\"image-20230721155134720\"></p>\n<h3 id=\"e-g-1\"><a href=\"#e-g-1\" class=\"headerlink\" title=\"e.g\"></a>e.g</h3><p><img src=\"/posts/5d16a534/image-20230721155429708.png\" alt=\"image-20230721155429708\"></p>\n<h2 id=\"Redis-的数据淘汰策略\"><a href=\"#Redis-的数据淘汰策略\" class=\"headerlink\" title=\"Redis 的数据淘汰策略\"></a>Redis 的数据淘汰策略</h2><p><img src=\"/posts/5d16a534/image-20230721155812984.png\" alt=\"image-20230721155812984\"></p>\n<h4 id=\"e-g-2\"><a href=\"#e-g-2\" class=\"headerlink\" title=\"e.g\"></a>e.g</h4><p><img src=\"/posts/5d16a534/image-20230721160432401.png\" alt=\"image-20230721160432401\"></p>\n<p><img src=\"/posts/5d16a534/image-20230721160448534.png\" alt=\"image-20230721160448534\"></p>\n<h2 id=\"Redis-的分布式锁\"><a href=\"#Redis-的分布式锁\" class=\"headerlink\" title=\"Redis 的分布式锁\"></a>Redis 的分布式锁</h2><p><img src=\"/posts/5d16a534/image-20230721175254947.png\" alt=\"image-20230721175254947\"></p>\n<h4 id=\"e-g-3\"><a href=\"#e-g-3\" class=\"headerlink\" title=\"e.g\"></a>e.g</h4><p><img src=\"/posts/5d16a534/image-20230721175554263.png\" alt=\"image-20230721175554263\"></p>\n<h2 id=\"Redis-集群\"><a href=\"#Redis-集群\" class=\"headerlink\" title=\"Redis 集群\"></a>Redis 集群</h2><p><img src=\"/posts/5d16a534/image-20230721175832796.png\" alt=\"image-20230721175832796\"></p>\n<h3 id=\"主从复制\"><a href=\"#主从复制\" class=\"headerlink\" title=\"主从复制\"></a>主从复制</h3><p><img src=\"/posts/5d16a534/image-20230721180023425.png\" alt=\"image-20230721180023425\"></p>\n<h5 id=\"全量同步\"><a href=\"#全量同步\" class=\"headerlink\" title=\"全量同步\"></a>全量同步</h5><p><img src=\"/posts/5d16a534/image-20230721182042182.png\" alt=\"image-20230721182042182\">  </p>\n<h5 id=\"增量同步\"><a href=\"#增量同步\" class=\"headerlink\" title=\"增量同步\"></a>增量同步</h5><p><img src=\"/posts/5d16a534/image-20230721182249354.png\" alt=\"image-20230721182249354\"></p>\n<h3 id=\"哨兵模式\"><a href=\"#哨兵模式\" class=\"headerlink\" title=\"哨兵模式\"></a>哨兵模式</h3><p><img src=\"/posts/5d16a534/image-20230721211412045.png\" alt=\"image-20230721211412045\"></p>\n<h5 id=\"服务状态监控\"><a href=\"#服务状态监控\" class=\"headerlink\" title=\"服务状态监控\"></a>服务状态监控</h5><p><img src=\"/posts/5d16a534/image-20230721211929068.png\" alt=\"image-20230721211929068\"></p>\n<h5 id=\"哨兵模式（脑裂）\"><a href=\"#哨兵模式（脑裂）\" class=\"headerlink\" title=\"哨兵模式（脑裂）\"></a>哨兵模式（脑裂）</h5><p><img src=\"/posts/5d16a534/image-20230721212233383.png\" alt=\"image-20230721212233383\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">master因为网络或者其他原因暂时不能和Sentinel通信，导致从节点中产生了新的master，等网络恢复之后，会产生两个master，那么之前的master会降级为slave，（那么这个过程中客户端到老master中存入的数据就会永久丢失）</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h5 id=\"e-g-4\"><a href=\"#e-g-4\" class=\"headerlink\" title=\"e.g\"></a>e.g</h5><p><img src=\"/posts/5d16a534/image-20230722103032370.png\" alt=\"image-20230722102959972\"></p>\n<h3 id=\"分片集群\"><a href=\"#分片集群\" class=\"headerlink\" title=\"分片集群\"></a>分片集群</h3><p><img src=\"/posts/5d16a534/image-20230722103507730.png\" alt=\"image-20230722103507730\"></p>\n<h5 id=\"分片集群结构-数据读写（哈希槽）\"><a href=\"#分片集群结构-数据读写（哈希槽）\" class=\"headerlink\" title=\"分片集群结构-数据读写（哈希槽）\"></a>分片集群结构-数据读写（哈希槽）</h5><p><img src=\"/posts/5d16a534/image-20230722104106658.png\" alt=\"image-20230722104106658\"></p>\n<h5 id=\"e-g-5\"><a href=\"#e-g-5\" class=\"headerlink\" title=\"e.g\"></a>e.g</h5><p><img src=\"/posts/5d16a534/image-20230722104456988.png\" alt=\"image-20230722104456988\"></p>\n<h2 id=\"Redis-单线程\"><a href=\"#Redis-单线程\" class=\"headerlink\" title=\"Redis 单线程\"></a>Redis 单线程</h2><p><img src=\"/posts/5d16a534/image-20230722104858964.png\" alt=\"image-20230722104858964\"></p>\n<h3 id=\"用户空间和内核空间\"><a href=\"#用户空间和内核空间\" class=\"headerlink\" title=\"用户空间和内核空间\"></a>用户空间和内核空间</h3><p><img src=\"/posts/5d16a534/image-20230722105348983.png\" alt=\"image-20230722105348983\"></p>\n<h3 id=\"阻塞-I-x2F-O\"><a href=\"#阻塞-I-x2F-O\" class=\"headerlink\" title=\"阻塞 I&#x2F;O\"></a>阻塞 I&#x2F;O</h3><p><img src=\"/posts/5d16a534/image-20230722105633698.png\" alt=\"image-20230722105633698\"></p>\n<h3 id=\"非阻塞-I-x2F-O\"><a href=\"#非阻塞-I-x2F-O\" class=\"headerlink\" title=\"非阻塞 I&#x2F;O\"></a>非阻塞 I&#x2F;O</h3><p><img src=\"/posts/5d16a534/image-20230722110334906.png\" alt=\"image-20230722110334906\"></p>\n<h3 id=\"I-x2F-O-多路复用\"><a href=\"#I-x2F-O-多路复用\" class=\"headerlink\" title=\"I&#x2F;O 多路复用\"></a>I&#x2F;O 多路复用</h3><p><img src=\"/posts/5d16a534/image-20230722111138343.png\" alt=\"image-20230722111138343\"></p>\n<p><img src=\"/posts/5d16a534/image-20230722111618596.png\" alt=\"image-20230722111618596\"></p>\n<h3 id=\"Redis-的网络模型\"><a href=\"#Redis-的网络模型\" class=\"headerlink\" title=\"Redis 的网络模型\"></a>Redis 的网络模型</h3><p><img src=\"/posts/5d16a534/image-20230722112415285.png\" alt=\"image-20230722112415285\"></p>\n<h3 id=\"e-g-6\"><a href=\"#e-g-6\" class=\"headerlink\" title=\"e.g\"></a>e.g</h3><p><img src=\"/posts/5d16a534/image-20230722112450017-1690452640159-54.png\" alt=\"image-20230722112450017\"></p>\n","categories":[],"tags":[]}